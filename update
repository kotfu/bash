#!/usr/bin/env bash
#
# update the config repository and get third party dependencies
if [ -z ${CONFIG_DIR+x} ]; then
    echo "Please set CONFIG_DIR to point to the directory of the config repo"
    exit 1
fi
if [ ! -d $CONFIG_DIR ]; then
    echo "Please set CONFIG_DIR to point to the directory of the config repo"
    exit 1
fi

# update our git repo
cd $CONFIG_DIR
git pull
git submodule init
git submodule update --recursive

# update iterm2 shell integration
curl -L https://iterm2.com/misc/bash_startup.in \
-o bash.d/iterm2_shell_integration.bash

echo
echo Update complete. Type \""source $CONFIG_DIR/bashrc"\" to update your current shell.
